<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Gestionale Officina</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2e7d32">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- MENU LATERALE MOBILE -->
<div id="mobileDrawer" class="mobile-drawer">
  <button data-page="home">Home</button>
  <button data-page="appuntamenti">Appuntamenti</button>
  <button data-page="ordini">Ordini</button>
  <button data-page="clienti">Clienti</button>
  <button data-page="schede">Schede</button>
</div>

<div id="drawerOverlay" class="drawer-overlay"></div>

<!-- HEADER -->
<header class="topbar">
  <div class="topbar-inner">
  <div class="brand">
    <img src="logo.png" class="logo" alt="GoldenCar">
    <span class="brand-name">GOLDENCAR</span>
  </div>

  <div class="menu">
    <button onclick="showSection('home')">Home</button>
    <button onclick="showSection('appuntamenti')">Appuntamenti</button>
    <button onclick="showSection('clienti')">Clienti</button>
    <button onclick="showSection('schede')">Schede</button>
    <button onclick="showSection('ordini')">Ordini</button>
  </div>
</header>

<main>

  <!-- HOME -->
  <section id="home" class="page active">

  <h1 class="home-main-title">GESTIONALE GOLDENCAR</h1>

  <div class="home-layout">

    <!-- APPUNTAMENTI FISSI -->
    <section class="home-appointments">
      <div class="appointments-header">
        <h3>Oggi</h3>
      </div>

      <div id="oggiEventi" class="appointments-list">
        <!-- eventi -->
      </div>
    </section>

    <!-- MODULI OPERATIVI -->
    <div class="home-modules">

      <section class="home-module ordini">
        <h3>Ordini</h3>
        <div class="module-actions">
          <button onclick="homeNuovoOrdine()">‚ûï Nuovo ordine</button>
          <button class="secondary" onclick="avviaOrdineVocale()">üé§ Ordine vocale</button>
        </div>
      </section>

      <section class="home-module clienti">
        <h3>Clienti</h3>
        <div class="module-actions">
          <button onclick="homeCaricaLibrettoGallery()">üìÅ Carica libretto</button>
          <button class="secondary" onclick="homeCaricaLibrettoCamera()">üì∑ Fotocamera</button>
        </div>
      </section>

      <section class="home-module schede">
        <h3>Schede</h3>
        <div class="module-actions">
          <button onclick="apriAssistente()">üõ† Nuova scheda</button>
        </div>
      </section>

      <section class="home-module fatture">
        <h3>Fatture</h3>
        <div class="module-actions">
          <button onclick="window.open('https://metropolis.seac.it/login','_blank')">
            üìë Portale fatture
          </button>
        </div>
      </section>

    </div>

  </div>
</section>

  <!-- APPUNTAMENTI -->
  <section id="appuntamenti" class="page">
    <div class="page-header">
     <h2 class="page-title">APPUNTAMENTI</h2>
    </div>

    <div class="calendar-wrapper">
     <iframe
       src="https://calendar.google.com/calendar/embed?src=b7e97d29852b251d0a5dd505edceeade0e1228e0d71bfd2542ef0d11ac0cdb18%40group.calendar.google.com&ctz=Europe%2FRome"
       frameborder="0"
       scrolling="no">
     </iframe>
   </div>
  </section>

  <!-- ================= CLIENTI ================= -->
<section id="clienti" class="page">

  <div class="page-header">
    <h2 class="page-title">CLIENTI</h2>

    <button class="icon-btn refresh-btn" onclick="resetClienti()">
      <svg viewBox="0 0 24 24" class="icon-svg">
        <path d="M20 12a8 8 0 1 1-2.34-5.66" />
        <path d="M20 4v6h-6" />
      </svg>
    </button>
  </div>

  <!-- ================= RICERCA ================= -->
  <section class="section">
    <h3>Ricerca veicolo (TARGA)</h3>

    <div class="row">
      <input id="ricercaTarga" class="targa">
      <button class="secondary" id="btnCerca">Cerca</button>
    </div>

    <p id="esitoRicerca" class="esito-ricerca"></p>

    <div class="doc-row">
      <span class="doc-label">Libretto</span>
    
      <!-- UPLOAD -->
      <button class="icon-btn"
        onclick="document.getElementById('librettoGallery').click()">
        <svg viewBox="0 0 24 24" class="icon-svg">
          <path d="M12 16V4"/>
          <path d="M8 8l4-4 4 4"/>
          <path d="M4 20h16"/>
        </svg>
      </button>
    
      <!-- CAMERA -->
      <button class="icon-btn"
        onclick="document.getElementById('librettoCamera').click()">
        <svg viewBox="0 0 24 24" class="icon-svg">
          <path d="M4 7h3l2-2h6l2 2h3v12H4z"/>
          <circle cx="12" cy="13" r="4"/>
        </svg>
      </button>
    
      <!-- VISUALIZZA -->
      <button id="librettoLink" class="secondary hidden" type="button">
        Visualizza
      </button>
    
      <!-- ANALIZZA OCR -->
      <button id="btnAnalizza" class="secondary">
        Analizza OCR
      </button>
    
      <!-- LOADING -->
      <img src="logo.png" id="loadingLibretto" class="loading-logo">
      <img src="logo.png" id="loadingOCR" class="loading-logo">
    
    </div>
    
    <input type="file" id="librettoGallery" accept="image/*" hidden>
    <input type="file" id="librettoCamera" accept="image/*" capture="environment" hidden>

  </section>

  <!-- ================= DATI CLIENTE ================= -->
  <section class="section">
    <h3>Dati cliente</h3>

    <div class="form-grid">
      <input id="nome" placeholder="Nome cliente">
      <input id="indirizzo" placeholder="Indirizzo">
      <input id="telefono" placeholder="Telefono">
      <input id="data" placeholder="Data di nascita">
      <input id="cf" placeholder="Codice fiscale">
    </div>
  </section>

  <!-- ================= DATI VEICOLO ================= -->
  <section class="section">
    <h3>Dati veicolo</h3>

    <div class="form-grid">
      <input id="veicolo" placeholder="Veicolo">
      <input id="motore" placeholder="Motore">
      <input id="targa" placeholder="Targa">
      <input id="immatricolazione" placeholder="Immatricolazione">
    </div>
  </section>

  <!-- ================= DOCUMENTI ================= -->
  <section class="section">
    <h3>Documenti</h3>

    <div class="doc-grid">

      <!-- TARGA -->
      <div class="doc-row">
        <span class="doc-label">Targa</span>
      
        <button class="icon-btn"
          onclick="document.getElementById('targaGallery').click()">
          <svg viewBox="0 0 24 24" class="icon-svg">
            <path d="M12 16V4"/>
            <path d="M8 8l4-4 4 4"/>
            <path d="M4 20h16"/>
          </svg>
        </button>
      
        <button class="icon-btn"
          onclick="document.getElementById('targaCamera').click()">
          <svg viewBox="0 0 24 24" class="icon-svg">
            <path d="M4 7h3l2-2h6l2 2h3v12H4z"/>
            <circle cx="12" cy="13" r="4"/>
          </svg>
        </button>
      
        <button id="targaLink" class="secondary hidden" type="button">
          Visualizza
        </button>
      
        <img src="logo.png" id="loadingTarga" class="loading-logo">
      </div>
      
      <input type="file" id="targaGallery" accept="image/*" hidden>
      <input type="file" id="targaCamera" accept="image/*" capture="environment" hidden>

      <!-- ALTRI DOCUMENTI -->
      <div class="doc-row">
        <span class="doc-label">Documenti</span>
      
        <button class="icon-btn"
          onclick="document.getElementById('altriDocumenti').click()">
           <svg viewBox="0 0 24 24" class="icon-svg">
            <path d="M12 16V4"/>
            <path d="M8 8l4-4 4 4"/>
            <path d="M4 20h16"/>
          </svg>
        </button>
      
        <span id="altriCount" class="file-count"></span>
      
        <img src="logo.png" id="loadingAltri" class="loading-logo">
      </div>
      
      <input type="file" id="altriDocumenti" multiple hidden>

    </div>
  </section>

  <!-- ================= BOTTONI ================= -->
  <section class="section actions">
    <button id="btnSalva" class="secondary">
      Salva cliente
    </button>

    <button id="btnCartellaCliente" class="hidden">
      Apri cartella cliente
    </button>

    <p id="stato"></p>
  </section>

</section>

  <!-- SCHEDE -->
  <section id="schede" class="page">

  <div class="page-header">
    <h2 class="page-title">SCHEDE</h2>
  </div>

  <div class="page-content">
    <button onclick="apriAssistente()">‚ûï Nuova scheda</button>
    <div id="listaSchede"></div>
  </div>

</section>

 <!-- ORDINI -->
<section id="ordini" class="page">

  <div class="page-header">
    <h2 class="page-title">ORDINI</h2>
  </div>

  <div class="page-content">

    <div class="ordini-actions">
      <button class="btn-nuovo" onclick="nuovoOrdine()">
        ‚ûï Nuovo ordine
      </button>
    </div>

    <div id="listaOrdini"></div>

  <button id="btnOrdineVocale" onclick="avviaOrdineVocale()">
  <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
    <path d="M12 14a3 3 0 003-3V5a3 3 0 10-6 0v6a3 3 0 003 3z"/>
    <path d="M19 11a7 7 0 01-14 0H3a9 9 0 0018 0h-2z"/>
    <path d="M11 19h2v3h-2z"/>
  </svg>
</button>

  </div>

</section>

  <!-- ASSISTENTE -->
<section id="assistente" class="page assistente">

  <!-- HEADER -->
  <div class="assistente-header">

    <div class="assistente-left">
      <span class="assistente-title">ASSISTENTE</span>
    </div>

    <div class="assistente-center">
      <label class="switch">
        <input type="checkbox" id="modeSwitch">
        <span class="slider"></span>
      </label>
    </div>

    <div class="assistente-right">
      <button class="assistente-close" onclick="esciAssistente()">‚úï</button>
    </div>

  </div>

  <!-- üî• BOX STATO SCHEDA (NUOVO) -->
  <!-- üî• BOX STATO SCHEDA -->
<div id="statoSchedaBox" class="stato-scheda hidden">

  <!-- CLIENTE | VEICOLO -->
  <div class="scheda-top">
    <div class="scheda-col">
      <div class="scheda-title">CLIENTE</div>
      <div id="clienteBox"></div>
    </div>

    <div class="scheda-col">
      <div class="scheda-title">VEICOLO</div>
      <div id="veicoloBox"></div>
    </div>
  </div>

  <!-- ELENCO DATI -->
  <div class="scheda-lista">
    <div class="scheda-riga">
      <strong>Problemi:</strong>
      <span id="problemiBox"></span>
    </div>

    <div class="scheda-riga">
      <strong>Lavori:</strong>
      <span id="lavoriBox"></span>
    </div>

    <div class="scheda-riga">
      <strong>Prodotti:</strong>
      <span id="prodottiBox"></span>
    </div>

    <div class="scheda-riga">
      <strong>Ore:</strong>
      <span id="oreBox"></span>
    </div>

    <div class="scheda-riga">
      <strong>Note:</strong>
      <span id="noteBox"></span>
    </div>
  </div>

</div>

<!-- CHAT -->
<div id="assistenteChat" class="assistente-chat"></div>

<!-- INPUT -->
<div class="assistente-input-row">
  <input id="assistenteInput" placeholder="Scrivi un messaggio..." />
  <button id="btnMic">üé§</button>
</div>

</section>

</main>

<!-- JS -->
<script src="./app.js"></script>

</body>
</html>





















